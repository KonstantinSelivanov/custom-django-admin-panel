{% load i18n %}{% load cms_menu_tags %}
{% spaceless %}
{% if is_user_allowed and not item.is_empty %}
    <li class="cms-menu-top
        {% if is_first %}
            cms-menu-top-first
        {% endif %}
        {% if is_last %}
            cms-menu-top-last
        {% endif %}
        {% if item.children %}
            cms-has-submenu
        {% endif %}
        {% if not item.enabled %}
            cms-disabled
        {% endif %}
        {% if not item.url %}
            cms-no-url
        {% endif %}
        {% if is_selected %}
            cms-menu-open
        {% else %}
            cms-menu-not-open
        {% endif %}
        {% if item.add_url %}
            cms-has-add-url
        {% endif %}" 
        {% if item.css_styles %}
            style="{{ item.css_styles }}"
        {% endif %}>
        <div class="cms-menu-image">
            <a aria-label="{{ item.title }}"
                title="{{ item.description|default:'' }}"
                href="
                    {% if item.url and item.enabled %}
                        {{ item.url }}
                    {% else %}
                        javascript:;
                    {% endif %}">
                <i class="fa fa-fw {{ icon }}"></i>
            </a>
        </div>
        <a href="
            {% if item.url and item.enabled %}
                {{ item.url }}
            {% else %}
                javascript:;
            {% endif %}"
            {% if item.description %}
                title="{{ item.description }}"
            {% endif %}
            {% if item.accesskey %}
                accesskey="{{ item.accesskey }}"
            {% endif %}>
                {{ item.title }}
        </a>
        {% if item.add_url %}
            <a title="{% trans "Add" %}" 
               class="cms-add-url
                    {% if request.path == item.add_url %} 
                        cms-current
                    {% endif %}"
               href="{{ item.add_url }}">+
            </a>
        {% endif %}
        {% if item.children and item.enabled %}
        <div class="cms-submenu">
            <div class="cms-submenu-wrap">
                <div class="cms-submenu-head">{{ item.title }}</div>
                <ul>
                    {% for child_item in item.children %}
                        {% render_menu_item child_item forloop.first forloop.last %}
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endif %}
    </li>
{% endif %}
{% endspaceless %}
